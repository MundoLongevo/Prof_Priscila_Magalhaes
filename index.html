<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Entre a Raz√£o e a Ilus√£o - Jogo Educativo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET E CONFIGURA√á√ïES GERAIS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            height: 100%;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            color: #333;
            line-height: 1.5;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        /* CONTAINER PRINCIPAL */
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, #4a6fa5 0%, #3a5a80 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.1;
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .header h2 {
            font-size: 1rem;
            font-weight: 400;
            opacity: 0.9;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .quote {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.4;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
        }

        .author {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }

        /* TELAS DO JOGO */
        .screen {
            display: none;
            padding: 20px 15px;
            animation: fadeIn 0.4s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* TELA INICIAL */
        .start-screen h2 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .avatar-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 25px 0;
        }

        .avatar {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .avatar:hover, .avatar:active {
            transform: translateY(-3px);
            border-color: #4a6fa5;
            box-shadow: 0 8px 20px rgba(74, 111, 165, 0.15);
        }

        .avatar.selected {
            background: #e8f4fc;
            border-color: #4a6fa5;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(74, 111, 165, 0.2);
        }

        .avatar-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: block;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .avatar strong {
            display: block;
            color: #2c3e50;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .avatar small {
            color: #6c757d;
            font-size: 0.85rem;
            display: block;
        }

        /* BOT√ïES */
        .btn {
            display: block;
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4a6fa5 0%, #3a5a80 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 6px 15px rgba(74, 111, 165, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn:active {
            transform: scale(0.98);
            box-shadow: 0 3px 8px rgba(74, 111, 165, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(74, 111, 165, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 0.9rem;
            width: auto;
            display: inline-block;
        }

        /* BARRA DE PROGRESSO */
        .progress-container {
            margin: 20px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-info {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .progress-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a6fa5, #6fa5d6);
            width: 0%;
            transition: width 0.5s ease-out;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* PERGUNTAS E OP√á√ïES */
        .question-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 5px solid #4a6fa5;
            position: relative;
        }

        .question-counter {
            position: absolute;
            top: -10px;
            right: 15px;
            background: #4a6fa5;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .question-text {
            font-size: 1.2rem;
            color: #2c3e50;
            line-height: 1.4;
            margin-bottom: 0;
        }

        .options-grid {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option:hover, .option:active {
            border-color: #a0c1e8;
            background: #f0f7ff;
            transform: translateY(-2px);
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
            animation: pulseCorrect 0.5s;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        @keyframes pulseCorrect {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        .option-letter {
            display: inline-block;
            width: 28px;
            height: 28px;
            background: #e9ecef;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 12px;
            font-weight: bold;
            color: #495057;
        }

        .correct .option-letter {
            background: #28a745;
            color: white;
        }

        .incorrect .option-letter {
            background: #dc3545;
            color: white;
        }

        /* FEEDBACK */
        .feedback {
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background: #d4edda;
            border-left: 5px solid #28a745;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-explanation {
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .citation {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            padding: 12px;
            font-style: italic;
            color: #4a6fa5;
            border-left: 3px solid #4a6fa5;
            margin-top: 10px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .citation i {
            margin-right: 5px;
        }

        /* MEDALHAS */
        .medals-section {
            text-align: center;
            padding: 20px 0;
        }

        .medals-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        @media (min-width: 480px) {
            .medals-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .medal {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
            border: 4px solid #dee2e6;
            margin: 0 auto;
            position: relative;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .medal.earned {
            animation: medalPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes medalPop {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .medal-bronze.earned {
            background: linear-gradient(135deg, #cd7f32, #e6b17e);
            border-color: #cd7f32;
            box-shadow: 0 8px 20px rgba(205, 127, 50, 0.3);
        }

        .medal-silver.earned {
            background: linear-gradient(135deg, #c0c0c0, #e0e0e0);
            border-color: #c0c0c0;
            box-shadow: 0 8px 20px rgba(192, 192, 192, 0.3);
        }

        .medal-gold.earned {
            background: linear-gradient(135deg, #ffd700, #fff8b0);
            border-color: #ffd700;
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
        }

        .medal-diamond.earned {
            background: linear-gradient(135deg, #b9f2ff, #e6f9ff);
            border-color: #b9f2ff;
            box-shadow: 0 8px 20px rgba(185, 242, 255, 0.4);
        }

        .medal-name {
            margin-top: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            color: #495057;
        }

        .medal.earned + .medal-name {
            color: #2c3e50;
            font-weight: 700;
        }

        /* TELA DE RESULTADOS */
        .results {
            text-align: center;
            padding: 20px 0;
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 800;
            color: #4a6fa5;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .score-message {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .medal-descriptions {
            text-align: left;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
        }

        .medal-description {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .medal-description:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .medal-icon {
            font-size: 1.8rem;
            min-width: 50px;
            text-align: center;
        }

        /* MINI-JOGO DE CONHECIMENTO */
        .knowledge-challenge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }

        .challenge-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .challenge-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .challenge-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .challenge-item:hover, .challenge-item:active {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .challenge-item.correct-match {
            background: rgba(40, 167, 69, 0.8);
            animation: matchSuccess 0.5s;
        }

        .challenge-item.incorrect-match {
            background: rgba(220, 53, 69, 0.8);
            animation: matchError 0.3s;
        }

        @keyframes matchSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes matchError {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* RODAP√â */
        .footer {
            text-align: center;
            padding: 20px 15px;
            color: #6c757d;
            font-size: 0.85rem;
            border-top: 1px solid #e9ecef;
            margin-top: 20px;
        }

        .footer a {
            color: #4a6fa5;
            text-decoration: none;
            font-weight: 600;
        }

        /* ANIMA√á√ïES DE ENGajamento */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f00;
            opacity: 0;
            z-index: 1000;
            pointer-events: none;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            opacity: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: gold;
        }

        .pulse {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* RESPONSIVIDADE AVAN√áADA */
        @media (max-width: 360px) {
            .avatar-options {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
        }

        @media (min-width: 480px) {
            body {
                padding: 20px;
            }
            
            .container {
                max-width: 450px;
            }
            
            .avatar-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 768px) {
            body {
                padding: 30px;
            }
            
            .container {
                max-width: 500px;
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .screen {
                padding: 25px 20px;
            }
        }

        /* AJUSTES PARA IOS */
        @supports (-webkit-touch-callout: none) {
            .btn, .option, .avatar, .challenge-item {
                cursor: default;
            }
            
            .btn:active, .option:active, .avatar:active, .challenge-item:active {
                opacity: 0.7;
            }
        }

        /* AJUSTES PARA ANDROID */
        @supports not (-webkit-touch-callout: none) {
            .btn:hover, .option:hover, .avatar:hover, .challenge-item:hover {
                opacity: 0.9;
            }
        }

        /* SCROLL PERSONALIZADO */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #4a6fa5;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3a5a80;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- CABE√áALHO -->
        <div class="header">
            <h1><i class="fas fa-brain"></i> Entre a Raz√£o e a Ilus√£o</h1>
            <h2>Jogo Educativo sobre Esquizofrenia</h2>
            
            <div class="quote">
                "A condi√ß√£o humana n√£o √© linear e racional como queremos crer, mas se d√° na conviv√™ncia entre aspectos l√≥gico-racionais e a dimens√£o subjetiva do mundo mental."
                <br><small>(P√°gina 7 do livro)</small>
            </div>
            
            <div class="author">
                Desenvolvido pela Professora Priscila Magalh√£es<br>
                Baseado no livro "Entre a Raz√£o e a Ilus√£o: Desmistificando a Esquizofrenia"
            </div>
        </div>

        <!-- TELA 1: ESCOLHA DE PERSONAGEM -->
        <div id="screen1" class="screen active">
            <h2>Escolha sua perspectiva na jornada</h2>
            <p>Voc√™ vivenciar√° a esquizofrenia atrav√©s de uma das quatro perspectivas apresentadas no livro:</p>
            
            <div class="avatar-options">
                <div class="avatar" data-avatar="gabriel" onclick="selectAvatar('gabriel')">
                    <div class="avatar-icon">üë§</div>
                    <strong>Gabriel</strong>
                    <small>Pessoa com esquizofrenia</small>
                </div>
                
                <div class="avatar" data-avatar="family" onclick="selectAvatar('family')">
                    <div class="avatar-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <strong>Fam√≠lia</strong>
                    <small>Pais e irm√£os</small>
                </div>
                
                <div class="avatar" data-avatar="professional" onclick="selectAvatar('professional')">
                    <div class="avatar-icon">‚öïÔ∏è</div>
                    <strong>Profissional</strong>
                    <small>Psiquiatra/terapeuta</small>
                </div>
                
                <div class="avatar" data-avatar="community" onclick="selectAvatar('community')">
                    <div class="avatar-icon">üèòÔ∏è</div>
                    <strong>Comunidade</strong>
                    <small>Vizinhos e amigos</small>
                </div>
            </div>
            
            <div class="knowledge-challenge">
                <div class="challenge-title">
                    <i class="fas fa-lightbulb"></i> Teste R√°pido de Conceitos
                </div>
                <p>Antes de come√ßar, associe os termos:</p>
                
                <div class="challenge-grid" id="conceptGrid">
                    <!-- Itens ser√£o inseridos pelo JavaScript -->
                </div>
                
                <div id="matchResult"></div>
            </div>
            
            <button class="btn" onclick="startGame()" id="startBtn" disabled>
                <i class="fas fa-play-circle"></i> Iniciar Jornada
            </button>
        </div>

        <!-- TELA 2: QUIZ PRINCIPAL -->
        <div id="screen2" class="screen">
            <div class="progress-container">
                <div class="progress-header">
                    <div class="progress-info">
                        <span id="currentQuestion">1</span>/<span id="totalQuestions">20</span>
                        <span id="scoreDisplay">Pontos: 0</span>
                    </div>
                    <div id="streakCounter" style="display: none;">
                        <i class="fas fa-fire" style="color: #ff6b35;"></i> <span id="streak">0</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="question-box">
                <div class="question-counter" id="questionNumber">1</div>
                <div class="question-text" id="questionText">Carregando pergunta...</div>
            </div>
            
            <div class="options-grid" id="optionsContainer">
                <!-- Op√ß√µes ser√£o inseridas pelo JavaScript -->
            </div>
            
            <div class="feedback" id="feedback">
                <!-- Feedback ser√° inserido aqui -->
            </div>
            
            <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display:none;">
                <i class="fas fa-arrow-right"></i> Pr√≥xima Pergunta
            </button>
            
            <div id="miniGameContainer" style="display:none; margin-top: 20px;">
                <!-- Mini-jogo ser√° inserido aqui -->
            </div>
        </div>

        <!-- TELA 3: RESULTADOS E MEDALHAS -->
        <div id="screen3" class="screen">
            <div class="results">
                <h2><i class="fas fa-trophy"></i> Jornada Conclu√≠da!</h2>
                
                <div class="score-display" id="finalScore">0/200</div>
                
                <div class="score-message" id="finalMessage">
                    Carregando mensagem...
                </div>
                
                <div class="medals-section">
                    <h3><i class="fas fa-medal"></i> Medalhas Conquistadas</h3>
                    
                    <div class="medals-container">
                        <div>
                            <div class="medal medal-bronze" id="medal1">
                                <span>ü•â</span>
                            </div>
                            <div class="medal-name">Participa√ß√£o</div>
                        </div>
                        
                        <div>
                            <div class="medal medal-silver" id="medal2">
                                <span>ü•à</span>
                            </div>
                            <div class="medal-name">Conhecimento</div>
                        </div>
                        
                        <div>
                            <div class="medal medal-gold" id="medal3">
                                <span>ü•á</span>
                            </div>
                            <div class="medal-name">Compreens√£o</div>
                        </div>
                        
                        <div>
                            <div class="medal medal-diamond" id="medal4">
                                <span>üíé</span>
                            </div>
                            <div class="medal-name">Maestria</div>
                        </div>
                    </div>
                </div>
                
                <div class="medal-descriptions" id="medalDescriptions">
                    <!-- Descri√ß√µes das medalhas ser√£o inseridas aqui -->
                </div>
                
                <div class="knowledge-challenge">
                    <div class="challenge-title">
                        <i class="fas fa-star"></i> Desafio B√¥nus
                    </div>
                    <p>Complete para desbloquear conte√∫do extra:</p>
                    <div id="bonusChallenge">
                        <!-- Desafio b√¥nus ser√° inserido aqui -->
                    </div>
                </div>
                
                <button class="btn" onclick="restartGame()">
                    <i class="fas fa-redo"></i> Jogar Novamente
                </button>
                
                <button class="btn btn-small" onclick="showCertificate()" style="background: linear-gradient(135deg, #28a745, #20c997); margin: 10px auto;">
                    <i class="fas fa-award"></i> Gerar Certificado
                </button>
            </div>
        </div>

        <!-- RODAP√â -->
        <div class="footer">
            <p>Este jogo educativo foi desenvolvido com base no livro "Entre a Raz√£o e a Ilus√£o: Desmistificando a Esquizofrenia"</p>
            <p>¬© 2023 Professora Priscila Magalh√£es | Todos os direitos educacionais reservados</p>
        </div>
    </div>

    <!-- √ÅREA PARA ANIMA√á√ïES -->
    <div id="celebrationArea"></div>

    <script>
        // ============================================
        // DADOS E CONFIGURA√á√ïES DO JOGO
        // ============================================
        
        let selectedAvatar = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        let streak = 0;
        let maxStreak = 0;
        let gameCompleted = false;
        let correctMatches = 0;
        
        // Banco de perguntas expandido (20 perguntas)
        const gameQuestions = [
            // PERGUNTAS SOBRE SINTOMAS
            {
                question: "De acordo com o livro, qual √© uma caracter√≠stica central da esquizofrenia durante uma crise aguda?",
                options: [
                    "A pessoa perde completamente a mem√≥ria",
                    "A pessoa acredita nos pensamentos e percep√ß√µes que tem, sentindo que est√£o acontecendo",
                    "A pessoa se torna automaticamente violenta",
                    "A pessoa fica extremamente euf√≥rica"
                ],
                correct: 1,
                citation: "P√°gina 13: 'A pessoa que adoece, ao passar por uma crise aguda, acredita nos pensamentos e nas percep√ß√µes que tem. Mais do que acreditar, sente que eles est√£o acontecendo.'",
                explanation: "Durante uma crise psic√≥tica, a realidade interna da pessoa se torna mais v√≠vida e convincente do que a realidade externa compartilhada.",
                category: "Sintomas",
                difficulty: 1
            },
            {
                question: "Qual destes √© considerado um sintoma POSITIVO da esquizofrenia?",
                options: [
                    "Falta de vontade (abulia)",
                    "Isolamento social",
                    "Alucina√ß√µes auditivas",
                    "Embotamento afetivo"
                ],
                correct: 2,
                citation: "P√°gina 35-36: 'Gabriel come√ßa a ouvir vozes... Os m√©dicos descrevem esse tipo de experi√™ncia como alucina√ß√µes auditivas.'",
                explanation: "Sintomas positivos s√£o aqueles que representam uma adi√ß√£o ou exacerba√ß√£o de experi√™ncias normais, como alucina√ß√µes e del√≠rios.",
                category: "Sintomas",
                difficulty: 1
            },
            {
                question: "O que caracteriza o 'embotamento afetivo' na esquizofrenia?",
                options: [
                    "Express√£o exagerada de emo√ß√µes",
                    "Dificuldade em expressar e perceber emo√ß√µes",
                    "Mudan√ßas r√°pidas de humor",
                    "Aus√™ncia total de emo√ß√µes"
                ],
                correct: 1,
                citation: "P√°gina 46: 'Ele tem dificuldade em expressar o que sente e tamb√©m em perceber como as pessoas expressam seus sentimentos. Os m√©dicos descrevem esse tipo de experi√™ncia como embotamento afetivo.'",
                explanation: "O embotamento afetivo refere-se √† redu√ß√£o na express√£o emocional, n√£o √† aus√™ncia total de emo√ß√µes internas.",
                category: "Sintomas",
                difficulty: 2
            },
            
            // PERGUNTAS SOBRE NEUROBIOLOGIA
            {
                question: "Qual neurotransmissor est√° mais associado aos sintomas positivos da esquizofrenia?",
                options: [
                    "Serotonina",
                    "Dopamina",
                    "GABA",
                    "Acetilcolina"
                ],
                correct: 1,
                citation: "P√°gina 91: 'Sabe-se que os medicamentos para a esquizofrenia atuam diminuindo a fun√ß√£o da dopamina.'",
                explanation: "O aumento da atividade dopamin√©rgica, especialmente na via mesol√≠mbica, est√° associado a alucina√ß√µes e del√≠rios.",
                category: "Neurobiologia",
                difficulty: 2
            },
            {
                question: "O que significa 'neuroplasticidade' no contexto da recupera√ß√£o?",
                options: [
                    "Rigidez das estruturas cerebrais",
                    "Capacidade do c√©rebro de se modificar com experi√™ncias",
                    "Perda progressiva de neur√¥nios",
                    "Forma√ß√£o de novas alucina√ß√µes"
                ],
                correct: 1,
                citation: "P√°gina 99: 'Essa √© a ideia por tr√°s do conceito de neuroplasticidade, que oferece uma perspectiva importante no tratamento.'",
                explanation: "A neuroplasticidade permite que o c√©rebro se reorganize e forme novas conex√µes, fundamental para a reabilita√ß√£o.",
                category: "Neurobiologia",
                difficulty: 2
            },
            {
                question: "Qual regi√£o cerebral √© frequentemente associada a altera√ß√µes na esquizofrenia?",
                options: [
                    "Cerebelo",
                    "C√≥rtex pr√©-frontal",
                    "Bulbo olfat√≥rio",
                    "Ponte"
                ],
                correct: 1,
                citation: "P√°gina 92: 'As pessoas com esquizofrenia t√™m redu√ß√µes do volume de algumas regi√µes, como o c√≥rtex pr√©-frontal.'",
                explanation: "O c√≥rtex pr√©-frontal est√° envolvido em fun√ß√µes executivas, planejamento e controle de impulsos, frequentemente afetadas na esquizofrenia.",
                category: "Neurobiologia",
                difficulty: 3
            },
            
            // PERGUNTAS SOBRE TRATAMENTO
            {
                question: "Qual √© um erro comum que leva a reca√≠das na esquizofrenia?",
                options: [
                    "Fazer terapia ocupacional regularmente",
                    "Parar a medica√ß√£o quando os sintomas melhoram",
                    "Participar de grupos de apoio",
                    "Manter uma rotina estruturada"
                ],
                correct: 1,
                citation: "P√°gina 105: 'Um erro muito comum das pessoas que t√™m doen√ßas cr√¥nicas √© achar que est√£o curadas quando os sintomas desaparecem.'",
                explanation: "A esquizofrenia requer tratamento cont√≠nuo, mesmo durante per√≠odos de estabilidade, para prevenir reca√≠das.",
                category: "Tratamento",
                difficulty: 1
            },
            {
                question: "O que √© 'insight' no contexto da esquizofrenia?",
                options: [
                    "Capacidade de prever o futuro",
                    "Intelig√™ncia acima da m√©dia",
                    "Consci√™ncia sobre a pr√≥pria doen√ßa",
                    "Habilidade art√≠stica especial"
                ],
                correct: 2,
                citation: "P√°gina 117: 'Uma das grandes dificuldades √© n√£o terem consci√™ncia de que o que elas est√£o vivenciando √© afetado pela doen√ßa. Tal dificuldade √© tamb√©m chamada de falta de insight.'",
                explanation: "O insight refere-se √† capacidade de reconhecer que se tem uma doen√ßa mental e que os sintomas s√£o parte dela.",
                category: "Tratamento",
                difficulty: 2
            },
            {
                question: "Qual √© a fun√ß√£o principal da terapia ocupacional no tratamento?",
                options: [
                    "Substituir a medica√ß√£o",
                    "Organizar o cotidiano e exercitar projetos",
                    "Diagnosticar a esquizofrenia",
                    "Curar a doen√ßa completamente"
                ],
                correct: 1,
                citation: "P√°gina 70-71: 'O objetivo principal do tratamento era ajudar Gabriel a organizar seu cotidiano e exercitar projetos com come√ßo, meio e fim.'",
                explanation: "A terapia ocupacional ajuda a pessoa a reconstruir habilidades para atividades di√°rias e desenvolver projetos significativos.",
                category: "Tratamento",
                difficulty: 2
            },
            
            // PERGUNTAS SOBRE ESTIGMA
            {
                question: "Quantas perspectivas distintas o livro identifica no contexto da esquizofrenia?",
                options: [
                    "Duas: do paciente e do m√©dico",
                    "Tr√™s: do paciente, fam√≠lia e m√©dico",
                    "Quatro: do paciente, familiares, profissionais e comunidade",
                    "Cinco: incluindo a perspectiva espiritual"
                ],
                correct: 2,
                citation: "P√°gina 13: 'Entendemos que h√° quatro vis√µes distintas: a da pessoa que tem esquizofrenia, a de seus familiares, a dos profissionais e a da comunidade onde se vive.'",
                explanation: "Cada uma dessas quatro perspectivas √© v√°lida e importante para uma compreens√£o completa da experi√™ncia.",
                category: "Estigma",
                difficulty: 1
            },
            {
                question: "O que √© 'estigma' em rela√ß√£o aos transtornos mentais?",
                options: [
                    "Um tipo de tratamento",
                    "Uma marca negativa colocada na pessoa",
                    "Um sintoma da esquizofrenia",
                    "Uma t√©cnica terap√™utica"
                ],
                correct: 1,
                citation: "P√°gina 138: 'Estigma √© uma palavra que significa uma marca negativa colocada na pessoa.'",
                explanation: "O estigma leva ao preconceito, discrimina√ß√£o e exclus√£o social das pessoas com transtornos mentais.",
                category: "Estigma",
                difficulty: 1
            },
            
            // PERGUNTAS SOBRE EPIDEMIOLOGIA
            {
                question: "Qual √© a preval√™ncia estimada da esquizofrenia na popula√ß√£o geral?",
                options: [
                    "Aproximadamente 0,1%",
                    "Aproximadamente 0,5%",
                    "Aproximadamente 2%",
                    "Aproximadamente 5%"
                ],
                correct: 1,
                citation: "P√°gina 85: 'Estudos mostram que entre 0,4 e 0,7% da popula√ß√£o em geral desenvolve esquizofrenia ao longo da vida.'",
                explanation: "Isso significa que aproximadamente 1 em cada 200 pessoas desenvolver√° esquizofrenia ao longo da vida.",
                category: "Epidemiologia",
                difficulty: 2
            },
            {
                question: "A esquizofrenia afeta mais:",
                options: [
                    "Homens do que mulheres",
                    "Mulheres do que homens",
                    "Homens e mulheres igualmente",
                    "Apenas adolescentes"
                ],
                correct: 0,
                citation: "P√°gina 85: 'Existe uma rela√ß√£o de 1,4 de homens para cada mulher afetada, isto √©, ela afeta 40% mais homens do que mulheres.'",
                explanation: "A esquizofrenia geralmente tem in√≠cio mais precoce e curso mais grave em homens do que em mulheres.",
                category: "Epidemiologia",
                difficulty: 2
            },
            
            // PERGUNTAS SOBRE RECUPERA√á√ÉO
            {
                question: "Qual √© a mensagem central do livro sobre a conviv√™ncia com a esquizofrenia?",
                options: [
                    "A pessoa deve ser internada permanentemente",
                    "N√£o h√° esperan√ßa de recupera√ß√£o",
                    "√â poss√≠vel ter uma vida com qualidade apesar da doen√ßa",
                    "A fam√≠lia deve abandonar a pessoa"
                ],
                correct: 2,
                citation: "P√°gina 23: 'Esperamos que voc√™ encontre informa√ß√µes √∫teis e uma vis√£o da esquizofrenia como uma experi√™ncia que pode ser compreendida e para a qual h√° caminhos para supera√ß√£o.'",
                explanation: "O livro transmite uma mensagem de esperan√ßa realista, enfatizando que a recupera√ß√£o √© poss√≠vel.",
                category: "Recupera√ß√£o",
                difficulty: 1
            },
            {
                question: "O que significa 'sobrecarga' no contexto da esquizofrenia?",
                options: [
                    "Excesso de medica√ß√£o",
                    "Impacto da doen√ßa na pessoa, fam√≠lia e sociedade",
                    "Sobrecarga de trabalho dos m√©dicos",
                    "Excesso de sintomas positivos"
                ],
                correct: 1,
                citation: "P√°gina 86: 'A esquizofrenia causa um impacto (sobrecarga) para a pessoa, para a fam√≠lia e para a sociedade.'",
                explanation: "A sobrecarga inclui sofrimento pessoal, impacto familiar, custos sociais e anos de vida perdidos.",
                category: "Recupera√ß√£o",
                difficulty: 2
            },
            
            // PERGUNTAS ADICIONAIS
            {
                question: "Qual per√≠odo √© chamado de 'pr√≥dromos' na esquizofrenia?",
                options: [
                    "Per√≠odo ap√≥s a recupera√ß√£o",
                    "Fase que antecede o aparecimento dos sintomas plenos",
                    "Per√≠odo de interna√ß√£o hospitalar",
                    "Fase de tratamento medicamentoso"
                ],
                correct: 1,
                citation: "P√°gina 27: 'Antes do surgimento dos sintomas da esquizofrenia, h√° um per√≠odo que chamamos de pr√≥dromos.'",
                explanation: "Os pr√≥dromos s√£o caracterizados por mudan√ßas sutis no comportamento e funcionamento antes do primeiro epis√≥dio psic√≥tico.",
                category: "Sintomas",
                difficulty: 3
            },
            {
                question: "O que √© esquizofrenia refrat√°ria?",
                options: [
                    "Esquizofrenia de in√≠cio precoce",
                    "Quando a pessoa n√£o responde bem aos medicamentos convencionais",
                    "Esquizofrenia com sintomas apenas negativos",
                    "Forma leve da doen√ßa"
                ],
                correct: 1,
                citation: "P√°gina 119: 'Uma parcela dos portadores n√£o responde bem a eles, no sentido de n√£o apresentarem melhora adequada dos sintomas. Nesses casos, diz-se que a pessoa tem esquizofrenia refrat√°ria.'",
                explanation: "A esquizofrenia refrat√°ria requer medicamentos espec√≠ficos como a clozapina e abordagens terap√™uticas intensivas.",
                category: "Tratamento",
                difficulty: 3
            },
            {
                question: "Qual medica√ß√£o √© indicada para esquizofrenia refrat√°ria?",
                options: [
                    "Haloperidol",
                    "Risperidona",
                    "Clozapina",
                    "Olanzapina"
                ],
                correct: 2,
                citation: "P√°gina 120: 'Nos casos como o de Carlos, em que se caracteriza a esquizofrenia refrat√°ria, o tratamento recomendado √© o uso de um medicamento chamado clozapina.'",
                explanation: "A clozapina √© o √∫nico antipsic√≥tico com efic√°cia comprovada na esquizofrenia refrat√°ria, mas requer monitoramento sangu√≠neo.",
                category: "Tratamento",
                difficulty: 3
            },
            {
                question: "Qual √© a import√¢ncia da preven√ß√£o de reca√≠das?",
                options: [
                    "Evita apenas custos financeiros",
                    "Protege o c√©rebro de danos progressivos",
                    "Apenas melhora a qualidade de vida moment√¢nea",
                    "N√£o tem import√¢ncia significativa"
                ],
                correct: 1,
                citation: "P√°gina 98: 'As reca√≠das, al√©m de provocar a perda da maior parte das conquistas... tamb√©m provocam perda de tecido cerebral.'",
                explanation: "Cada reca√≠da pode causar danos cerebrais adicionais e perda de funcionamento, tornando a recupera√ß√£o mais dif√≠cil.",
                category: "Tratamento",
                difficulty: 2
            },
            {
                question: "O que o livro sugere sobre a rela√ß√£o entre religi√£o e tratamento?",
                options: [
                    "A religi√£o deve substituir o tratamento m√©dico",
                    "S√£o perspectivas complementares, n√£o excludentes",
                    "A religi√£o piora os sintomas",
                    "Apenas o tratamento cient√≠fico √© v√°lido"
                ],
                correct: 1,
                citation: "P√°gina 61: 'O ideal na vida das pessoas √© que as duas vis√µes sejam complementares.'",
                explanation: "O livro reconhece o valor da religi√£o como suporte espiritual, mas enfatiza a necessidade do tratamento m√©dico adequado.",
                category: "Tratamento",
                difficulty: 2
            }
        ];

        // Dados para o mini-jogo de associa√ß√£o
        const conceptPairs = [
            { term: "Alucina√ß√£o", definition: "Percep√ß√£o sem est√≠mulo externo" },
            { term: "Del√≠rio", definition: "Cren√ßa fixa incorrig√≠vel" },
            { term: "Avoli√ß√£o", definition: "Falta de vontade ou motiva√ß√£o" },
            { term: "Dopamina", definition: "Neurotransmissor dos sintomas positivos" },
            { term: "Insight", definition: "Consci√™ncia sobre a doen√ßa" },
            { term: "Estigma", definition: "Marca social negativa" }
        ];

        // ============================================
        // FUN√á√ïES PRINCIPAIS
        // ============================================

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Misturar perguntas
            questions = [...gameQuestions].sort(() => Math.random() - 0.5);
            
            // Configurar contador de perguntas
            document.getElementById('totalQuestions').textContent = questions.length;
            
            // Configurar mini-jogo de conceitos
            setupConceptGame();
            
            // Configurar desafio b√¥nus
            setupBonusChallenge();
        });

        // Configurar mini-jogo de conceitos
        function setupConceptGame() {
            const grid = document.getElementById('conceptGrid');
            grid.innerHTML = '';
            
            // Embaralhar conceitos
            const shuffledConcepts = [...conceptPairs].sort(() => Math.random() - 0.5);
            
            // Adicionar termos
            shuffledConcepts.forEach((pair, index) => {
                const termElement = document.createElement('div');
                termElement.className = 'challenge-item';
                termElement.textContent = pair.term;
                termElement.dataset.type = 'term';
                termElement.dataset.value = pair.term;
                termElement.onclick = () => selectConcept(termElement);
                grid.appendChild(termElement);
            });
            
            // Adicionar defini√ß√µes
            shuffledConcepts.forEach((pair, index) => {
                const defElement = document.createElement('div');
                defElement.className = 'challenge-item';
                defElement.textContent = pair.definition;
                defElement.dataset.type = 'definition';
                defElement.dataset.value = pair.term;
                defElement.onclick = () => selectConcept(defElement);
                grid.appendChild(defElement);
            });
        }

        // Selecionar conceito no mini-jogo
        let selectedConcept = null;
        
        function selectConcept(element) {
            if (element.classList.contains('correct-match')) return;
            
            if (!selectedConcept) {
                // Primeira sele√ß√£o
                selectedConcept = element;
                element.style.background = 'rgba(74, 111, 165, 0.5)';
            } else {
                // Segunda sele√ß√£o - verificar se combina
                const firstType = selectedConcept.dataset.type;
                const secondType = element.dataset.type;
                const firstValue = selectedConcept.dataset.value;
                const secondValue = element.dataset.value;
                
                if (firstType !== secondType && firstValue === secondValue) {
                    // Combina√ß√£o correta
                    selectedConcept.classList.add('correct-match');
                    element.classList.add('correct-match');
                    
                    // Animar
                    selectedConcept.style.animation = 'matchSuccess 0.5s';
                    element.style.animation = 'matchSuccess 0.5s';
                    
                    // Atualizar contador
                    correctMatches++;
                    const resultDiv = document.getElementById('matchResult');
                    resultDiv.innerHTML = `<p style="color: white; font-weight: bold;">‚úÖ Correto! ${correctMatches}/${conceptPairs.length} combina√ß√µes</p>`;
                    
                    // Verificar se completou
                    if (correctMatches === conceptPairs.length) {
                        setTimeout(() => {
                            resultDiv.innerHTML += `<p style="color: #ffd700; font-weight: bold;">üéâ Todos os conceitos corretos! B√¥nus: +10 pontos</p>`;
                        }, 500);
                    }
                } else {
                    // Combina√ß√£o incorreta
                    element.classList.add('incorrect-match');
                    setTimeout(() => {
                        element.classList.remove('incorrect-match');
                    }, 500);
                }
                
                // Resetar sele√ß√£o
                selectedConcept.style.background = '';
                selectedConcept = null;
            }
        }

        // Configurar desafio b√¥nus
        function setupBonusChallenge() {
            const bonusDiv = document.getElementById('bonusChallenge');
            bonusDiv.innerHTML = `
                <p>Complete a frase:</p>
                <p>"A esquizofrenia n√£o define o que voc√™ √©, entenda apenas como uma <input type='text' id='bonusAnswer' placeholder='...' style='border: 2px solid #4a6fa5; border-radius: 5px; padding: 5px; width: 150px;'> que voc√™ precisa cuidar."</p>
                <button class='btn-small' onclick='checkBonusAnswer()' style='margin-top: 10px;'><i class='fas fa-check'></i> Verificar</button>
                <p id='bonusResult' style='margin-top: 10px;'></p>
            `;
        }

        // Verificar resposta b√¥nus
        function checkBonusAnswer() {
            const answer = document.getElementById('bonusAnswer').value.toLowerCase();
            const resultDiv = document.getElementById('bonusResult');
            
            if (answer.includes('doen√ßa') || answer.includes('doenca')) {
                resultDiv.innerHTML = "<span style='color: #28a745; font-weight: bold;'>‚úÖ Correto! Cita√ß√£o da p√°gina 77 do livro.</span>";
                createConfetti(20);
            } else {
                resultDiv.innerHTML = "<span style='color: #dc3545;'>‚ùå Tente novamente. Dica: √â algo que voc√™ tem e precisa cuidar.</span>";
            }
        }

        // Selecionar avatar
        function selectAvatar(avatar) {
            selectedAvatar = avatar;
            
            // Remover sele√ß√£o anterior
            document.querySelectorAll('.avatar').forEach(av => {
                av.classList.remove('selected');
            });
            
            // Adicionar sele√ß√£o atual
            document.querySelector(`.avatar[data-avatar="${avatar}"]`).classList.add('selected');
            
            // Ativar bot√£o de iniciar
            document.getElementById('startBtn').disabled = false;
        }

        // Iniciar jogo
        function startGame() {
            if (!selectedAvatar) return;
            
            // Adicionar pontos b√¥nus por completar o mini-jogo
            if (correctMatches === conceptPairs.length) {
                score += 10;
            }
            
            // Atualizar tela
            document.getElementById('screen1').classList.remove('active');
            document.getElementById('screen2').classList.add('active');
            
            // Mostrar primeira pergunta
            showQuestion();
        }

        // Mostrar pergunta
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame();
                return;
            }
            
            const question = questions[currentQuestionIndex];
            
            // Atualizar elementos
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('questionNumber').textContent = currentQuestionIndex + 1;
            document.getElementById('scoreDisplay').textContent = `Pontos: ${score}`;
            
            // Atualizar streak se existir
            if (streak > 1) {
                document.getElementById('streakCounter').style.display = 'block';
                document.getElementById('streak').textContent = streak;
            } else {
                document.getElementById('streakCounter').style.display = 'none';
            }
            
            // Calcular progresso
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // Limpar op√ß√µes anteriores
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            // Adicionar novas op√ß√µes
            const letters = ['A', 'B', 'C', 'D'];
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <span class="option-letter">${letters[index]}</span>
                    ${option}
                `;
                optionElement.onclick = () => checkAnswer(index);
                optionsContainer.appendChild(optionElement);
            });
            
            // Esconder feedback e bot√£o pr√≥ximo
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            
            // Mostrar mini-jogo a cada 5 perguntas
            if (currentQuestionIndex > 0 && currentQuestionIndex % 5 === 0) {
                showMiniGame();
            } else {
                document.getElementById('miniGameContainer').style.display = 'none';
            }
        }

        // Mostrar mini-jogo
        function showMiniGame() {
            const container = document.getElementById('miniGameContainer');
            const miniGames = [
                {
                    title: "R√°pido! Associe o sintoma ao tipo",
                    content: `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px 0;">
                            <p><strong>Alucina√ß√£o auditiva:</strong> <button class="btn-small" onclick="checkMiniGame('positivo')" style="margin: 0 5px;">Positivo</button> <button class="btn-small" onclick="checkMiniGame('negativo')">Negativo</button></p>
                        </div>
                    `
                },
                {
                    title: "Qual neurotransmissor?",
                    content: `
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 10px 0;">
                            <p><strong>Principal alvo dos antipsic√≥ticos:</strong> 
                            <button class="btn-small" onclick="checkMiniGame('dopamina')" style="margin: 0 5px;">Dopamina</button>
                            <button class="btn-small" onclick="checkMiniGame('serotonina')" style="margin: 0 5px;">Serotonina</button>
                            <button class="btn-small" onclick="checkMiniGame('gaba')">GABA</button></p>
                        </div>
                    `
                }
            ];
            
            const randomGame = miniGames[Math.floor(Math.random() * miniGames.length)];
            
            container.innerHTML = `
                <div style="background: #e8f4fc; padding: 15px; border-radius: 12px; border-left: 5px solid #4a6fa5;">
                    <h4 style="margin: 0 0 10px 0; color: #2c3e50;"><i class="fas fa-gamepad"></i> ${randomGame.title}</h4>
                    ${randomGame.content}
                    <p id="miniGameResult" style="margin: 10px 0 0 0; font-weight: bold;"></p>
                </div>
            `;
            
            container.style.display = 'block';
        }

        // Verificar mini-jogo
        function checkMiniGame(answer) {
            const resultDiv = document.getElementById('miniGameResult');
            
            if ((answer === 'positivo') || (answer === 'dopamina')) {
                resultDiv.innerHTML = "<span style='color: #28a745;'>‚úÖ Correto! +5 pontos</span>";
                score += 5;
                document.getElementById('scoreDisplay').textContent = `Pontos: ${score}`;
                createConfetti(10);
            } else {
                resultDiv.innerHTML = "<span style='color: #dc3545;'>‚ùå Incorreto. Continue tentando!</span>";
            }
        }

        // Verificar resposta
        function checkAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            
            // Desabilitar todas as op√ß√µes
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            // Marcar resposta correta e incorreta
            options[question.correct].classList.add('correct');
            
            if (selectedIndex !== question.correct) {
                options[selectedIndex].classList.add('incorrect');
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <div class="feedback-title">
                        <i class="fas fa-times-circle"></i> Resposta incorreta
                    </div>
                    <div class="feedback-explanation">${question.explanation}</div>
                    <div class="citation">
                        <i class="fas fa-book-open"></i> ${question.citation}
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #6c757d;">
                        <i class="fas fa-tag"></i> Categoria: ${question.category} | 
                        <i class="fas fa-chart-line"></i> Dificuldade: ${'‚òÖ'.repeat(question.difficulty)}
                    </div>
                `;
                
                // Resetar streak
                streak = 0;
            } else {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <div class="feedback-title">
                        <i class="fas fa-check-circle"></i> Resposta correta!
                    </div>
                    <div class="feedback-explanation">${question.explanation}</div>
                    <div class="citation">
                        <i class="fas fa-book-open"></i> ${question.citation}
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #6c757d;">
                        <i class="fas fa-tag"></i> Categoria: ${question.category} | 
                        <i class="fas fa-chart-line"></i> Dificuldade: ${'‚òÖ'.repeat(question.difficulty)}
                    </div>
                `;
                
                // Adicionar pontos
                let points = 10 * question.difficulty;
                score += points;
                
                // Atualizar streak
                streak++;
                if (streak > maxStreak) maxStreak = streak;
                
                // B√¥nus por streak
                if (streak >= 3) {
                    const bonus = Math.floor(streak / 3) * 5;
                    score += bonus;
                    feedback.innerHTML += `<div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 5px; color: #856404;">
                        <i class="fas fa-fire"></i> Streak ${streak}! B√¥nus: +${bonus} pontos
                    </div>`;
                }
                
                // Confetti para respostas dif√≠ceis
                if (question.difficulty >= 3) {
                    createConfetti(15);
                }
                
                document.getElementById('scoreDisplay').textContent = `Pontos: ${score}`;
            }
            
            // Mostrar feedback
            feedback.style.display = 'block';
            
            // Mostrar bot√£o pr√≥ximo
            document.getElementById('nextBtn').style.display = 'block';
        }

        // Pr√≥xima pergunta
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                endGame();
            }
        }

        // Finalizar jogo
        function endGame() {
            // Atualizar tela
            document.getElementById('screen2').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
            
            // Calcular porcentagem
            const maxScore = questions.length * 10;
            const percentage = (score / maxScore) * 100;
            
            // Atualizar resultados
            document.getElementById('finalScore').textContent = `${score}/${maxScore}`;
            
            // Determinar mensagem final
            let message = '';
            let title = '';
            
            if (percentage >= 90) {
                title = "Especialista em Esquizofrenia!";
                message = "Voc√™ demonstrou um conhecimento excepcional sobre a esquizofrenia, seus sintomas, tratamentos e nuances. Parab√©ns!";
            } else if (percentage >= 75) {
                title = "Excelente Compreens√£o!";
                message = "Voc√™ tem um entendimento s√≥lido e abrangente sobre a esquizofrenia. Continue explorando o tema!";
            } else if (percentage >= 60) {
                title = "Bom Conhecimento!";
                message = "Voc√™ compreende os conceitos principais sobre esquizofrenia. Cada aprendizado √© um passo na dire√ß√£o certa.";
            } else if (percentage >= 40) {
                title = "Base S√≥lida!";
                message = "Voc√™ tem uma boa base de conhecimento sobre o tema. Continue estudando para aprofundar sua compreens√£o.";
            } else {
                title = "In√≠cio da Jornada!";
                message = "Todo aprendizado come√ßa com o primeiro passo. Continue explorando o tema para entender melhor a esquizofrenia.";
            }
            
            document.getElementById('finalMessage').innerHTML = `
                <h3>${title}</h3>
                <p>${message}</p>
                <p><strong>Estat√≠sticas:</strong><br>
                ‚Ä¢ Streak m√°ximo: ${maxStreak} acertos consecutivos<br>
                ‚Ä¢ Pontua√ß√£o: ${score} pontos<br>
                ‚Ä¢ Precis√£o: ${percentage.toFixed(1)}%<br>
                ‚Ä¢ Conceitos dominados: ${correctMatches}/${conceptPairs.length}</p>
            `;
            
            // Atribuir medalhas
            const medalDescriptions = document.getElementById('medalDescriptions');
            medalDescriptions.innerHTML = '';
            
            // Medalha 1: Participa√ß√£o (sempre ganha)
            document.getElementById('medal1').classList.add('earned');
            medalDescriptions.innerHTML += '<div class="medal-description"><span class="medal-icon">ü•â</span> <div><strong>Medalha da Participa√ß√£o</strong><br>Por completar a jornada educativa sobre esquizofrenia</div></div>';
            
            // Medalha 2: Acima de 40%
            if (percentage >= 40) {
                document.getElementById('medal2').classList.add('earned');
                medalDescriptions.innerHTML += '<div class="medal-description"><span class="medal-icon">ü•à</span> <div><strong>Medalha do Conhecimento</strong><br>Por demonstrar compreens√£o b√°sica dos conceitos</div></div>';
            }
            
            // Medalha 3: Acima de 60%
            if (percentage >= 60) {
                document.getElementById('medal3').classList.add('earned');
                medalDescriptions.innerHTML += '<div class="medal-description"><span class="medal-icon">ü•á</span> <div><strong>Medalha da Compreens√£o</strong><br>Por dominar os conceitos principais do livro</div></div>';
            }
            
            // Medalha 4: Acima de 75%
            if (percentage >= 75) {
                document.getElementById('medal4').classList.add('earned');
                medalDescriptions.innerHTML += '<div class="medal-description"><span class="medal-icon">üíé</span> <div><strong>Medalha da Maestria</strong><br>Por excelente dom√≠nio do conte√∫do e aplica√ß√£o pr√°tica</div></div>';
            }
            
            // Confetti para bom desempenho
            if (percentage >= 75) {
                setTimeout(() => {
                    createConfetti(30);
                    showCelebration();
                }, 500);
            }
            
            gameCompleted = true;
        }

        // Criar confetti
        function createConfetti(count) {
            const colors = ['#4a6fa5', '#28a745', '#dc3545', '#ffc107', '#17a2b8'];
            const container = document.getElementById('celebrationArea');
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                container.appendChild(confetti);
                
                // Anima√ß√£o
                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 720}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // Mostrar celebra√ß√£o
        function showCelebration() {
            const container = document.getElementById('celebrationArea');
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.innerHTML = 'üéâ';
            
            container.appendChild(celebration);
            
            // Anima√ß√£o de entrada
            celebration.animate([
                { transform: 'scale(0)', opacity: 0 },
                { transform: 'scale(1)', opacity: 1 }
            ], {
                duration: 500,
                easing: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)'
            });
            
            // Anima√ß√£o de sa√≠da
            setTimeout(() => {
                celebration.animate([
                    { transform: 'scale(1)', opacity: 1 },
                    { transform: 'scale(0)', opacity: 0 }
                ], {
                    duration: 500,
                    easing: 'ease-in'
                }).onfinish = () => celebration.remove();
            }, 1500);
        }

        // Reiniciar jogo
        function restartGame() {
            // Resetar vari√°veis
            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            maxStreak = 0;
            selectedAvatar = null;
            correctMatches = 0;
            
            // Resetar sele√ß√£o de avatar
            document.querySelectorAll('.avatar').forEach(av => {
                av.classList.remove('selected');
            });
            
            // Resetar medalhas
            document.querySelectorAll('.medal').forEach(medal => {
                medal.classList.remove('earned');
            });
            
            // Resetar mini-jogo
            setupConceptGame();
            document.getElementById('matchResult').innerHTML = '';
            
            // Resetar bot√£o
            document.getElementById('startBtn').disabled = true;
            
            // Misturar perguntas novamente
            questions = [...gameQuestions].sort(() => Math.random() - 0.5);
            
            // Voltar para tela inicial
            document.getElementById('screen3').classList.remove('active');
            document.getElementById('screen1').classList.add('active');
        }

        // Mostrar certificado
        function showCertificate() {
            const percentage = (score / (questions.length * 10)) * 100;
            const certificate = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;">
                    <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 100%; text-align: center; position: relative;">
                        <button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.5rem; color: #666; cursor: pointer;">√ó</button>
                        
                        <h2 style="color: #4a6fa5; margin-bottom: 20px;">üéì Certificado de Conclus√£o</h2>
                        
                        <div style="border: 3px solid gold; border-radius: 15px; padding: 20px; margin: 20px 0;">
                            <p>Certificamos que</p>
                            <h3 style="color: #2c3e50; margin: 10px 0;">JOGADOR(A)</h3>
                            <p>completou com sucesso o jogo educativo</p>
                            <h4 style="color: #4a6fa5; margin: 10px 0;">"Entre a Raz√£o e a Ilus√£o"</h4>
                            <p>com uma pontua√ß√£o de</p>
                            <h2 style="color: #28a745; margin: 10px 0;">${score} PONTOS (${percentage.toFixed(1)}%)</h2>
                            <p>demonstrando compreens√£o sobre esquizofrenia</p>
                        </div>
                        
                        <div style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center;">
                            <div style="text-align: left;">
                                <p><strong>Data:</strong> ${new Date().toLocaleDateString('pt-BR')}</p>
                                <p><strong>Conceitos dominados:</strong> ${correctMatches}/${conceptPairs.length}</p>
                            </div>
                            
                            <div style="text-align: right;">
                                <p style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 10px;">
                                    <strong>Prof. Priscila Magalh√£es</strong><br>
                                    Desenvolvedora do Jogo Educativo
                                </p>
                            </div>
                        </div>
                        
                        <button onclick="printCertificate()" style="margin-top: 20px; padding: 10px 20px; background: #4a6fa5; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            <i class="fas fa-print"></i> Imprimir Certificado
                        </button>
                    </div>
                </div>
            `;
            
            const certDiv = document.createElement('div');
            certDiv.innerHTML = certificate;
            document.body.appendChild(certDiv);
        }

        // Imprimir certificado
        function printCertificate() {
            window.print();
        }

        // Adicionar suporte para teclado
        document.addEventListener('keydown', function(event) {
            // Teclas 1-4 para selecionar avatar
            if (document.getElementById('screen1').classList.contains('active')) {
                if (event.key >= '1' && event.key <= '4') {
                    const avatars = ['gabriel', 'family', 'professional', 'community'];
                    selectAvatar(avatars[parseInt(event.key) - 1]);
                }
                if (event.key === 'Enter' && !document.getElementById('startBtn').disabled) {
                    startGame();
                }
            }
            
            // Teclas A-D para responder perguntas
            if (document.getElementById('screen2').classList.contains('active')) {
                if (event.key >= 'a' && event.key <= 'd') {
                    const index = event.key.charCodeAt(0) - 97;
                    const options = document.querySelectorAll('.option');
                    if (options[index] && !options[index].classList.contains('correct') && !options[index].classList.contains('incorrect')) {
                        checkAnswer(index);
                    }
                }
                if (event.key === 'Enter' && document.getElementById('nextBtn').style.display !== 'none') {
                    nextQuestion();
                }
            }
            
            // Tecla R para reiniciar
            if (event.key === 'r' || event.key === 'R') {
                if (gameCompleted) {
                    restartGame();
                }
            }
        });

        // Suporte para gestos em dispositivos m√≥veis
        let touchStartX = 0;
        let touchStartY = 0;
        
        document.addEventListener('touchstart', function(event) {
            touchStartX = event.touches[0].clientX;
            touchStartY = event.touches[0].clientY;
        }, { passive: true });
        
        document.addEventListener('touchend', function(event) {
            if (!touchStartX || !touchStartY) return;
            
            const touchEndX = event.changedTouches[0].clientX;
            const touchEndY = event.changedTouches[0].clientY;
            
            const diffX = touchEndX - touchStartX;
            const diffY = touchEndY - touchStartY;
            
            // Deslizar para esquerda para pr√≥xima pergunta (apenas se o bot√£o estiver vis√≠vel)
            if (Math.abs(diffX) > 50 && Math.abs(diffX) > Math.abs(diffY)) {
                if (diffX < -50 && document.getElementById('nextBtn').style.display !== 'none') {
                    nextQuestion();
                }
            }
            
            touchStartX = 0;
            touchStartY = 0;
        }, { passive: true });
    </script>
</body>
</html>